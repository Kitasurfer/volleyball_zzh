# Исправление проблемы с отображением позиции команды

## Проблема
На сайте отображалась неправильная позиция команды (9-е место вместо 8-го), потому что парсер брал данные из первой таблицы на странице VLW, которая могла содержать устаревшие данные или данные предыдущего тура.

## Решение
Обновлен парсер для обработки **всех таблиц** на странице и выбора наиболее актуальной:

1. **Приоритет #1**: Таблица, в которой наша команда имеет статистику (matches > 0 или points > 0)
2. **Приоритет #2**: Таблица с наибольшим количеством команд (наиболее полная)

## Что было изменено

### 1. `server/league-proxy.cjs`
- Функция `extractStandingsFromTable()` теперь ищет **все таблицы** вместо первой
- Добавлена логика выбора актуальной таблицы на основе наличия статистики команды
- Добавлено подробное логирование для отладки

### 2. `test-parser.js`
- Обновлен тестовый скрипт с той же логикой для локального тестирования
- Добавлено подробное логирование каждой найденной таблицы

## Как тестировать

### Вариант 1: Использовать тестовый скрипт (без запуска сервера)

```bash
cd /Users/bogdanfesenko/StudioProjects/Volleyball/package/blockbuster-volleyball
node test-parser.js
```

Скрипт покажет:
- Сколько таблиц найдено на странице
- Данные нашей команды в каждой таблице
- Какая таблица была выбрана и почему
- Итоговые данные команды

### Вариант 2: Запустить прокси-сервер

```bash
cd /Users/bogdanfesenko/StudioProjects/Volleyball/package/blockbuster-volleyball
node server/league-proxy.cjs
```

Затем в браузере или через curl:
```bash
curl http://localhost:3001/league-results
```

### Вариант 3: Запустить полное приложение

```bash
cd /Users/bogdanfesenko/StudioProjects/Volleyball/package/blockbuster-volleyball

# В одном терминале - прокси-сервер
node server/league-proxy.cjs

# В другом терминале - фронтенд
npm run dev
```

Откройте http://localhost:5173 и проверьте раздел "Aktuelle Tabelle" на главной странице.

## Ожидаемый результат

После исправления:
- Позиция команды: **8-е место** (как на оригинальном сайте)
- Сеты: **3:6** (вместо 0:8)
- Очки: **4** (вместо 0)

## Дополнительная информация

### Логи парсера
Теперь парсер выводит в консоль:
- Количество найденных таблиц
- Количество команд в каждой таблице
- Данные нашей команды (если найдена)
- Причину выбора конкретной таблицы

Это поможет отследить, какие данные извлекаются и почему.

### Возможные причины проблемы
1. **Множественные таблицы**: Сайт VLW может отображать несколько таблиц (историю, текущую, следующий тур)
2. **Кэширование**: Браузер или сервер могут кэшировать устаревшие данные
3. **Динамическая загрузка**: Некоторые таблицы могут загружаться через JavaScript

### Если проблема осталась
Если после исправления проблема не решена:
1. Проверьте логи парсера - они покажут, какие таблицы найдены
2. Убедитесь, что URL в `SERIES_URL` правильный и актуальный
3. Проверьте, не изменилась ли структура HTML на сайте VLW
